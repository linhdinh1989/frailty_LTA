/*Latent GOLD syntax for Step 1 and 2 of LTA, assuming measurement non-invariance*/
/*Input: All-wave data is presented in long-table format*/
options
   maxthreads=6;
   algorithm 
      tolerance=1e-008 emtolerance=0.01 emiterations=250 nriterations=50 ;
   startvalues
      seed=0 sets=50 tolerance=1e-005 iterations=200;
   bayes
      categorical=1 variances=1 latent=1 poisson=1;
   montecarlo
      seed=0 sets=0 replicates=500 tolerance=1e-008;
   quadrature  nodes=10;
   missing  includedependent;
   output      
      parameters=first  betaopts=wl standarderrors profile probmeans=posterior
      loadings bivariateresiduals estimatedvalues=model reorderclasses;
  outfile  'frailty_classification.sav' /*to save classification for Step 3 analysis*/
      classification      keep id, gender, age;
variables
   dependent sph nominal, socialfunc nominal, cogfunc nominal, adl nominal,
      iadl nominal, gali nominal, morbidity nominal, 
      depress nominal;
   independent time nominal;
   latent
      Cluster nominal 6 knownclass=survival(0: 0 0 1 1 1 1, 1: 1 0 0 0 0 0, 
      2: 0 1 0 0 0 0);
equations
   Cluster <- 1 + time;
   sph <- 1 + Cluster + time + Cluster*time;
   socialfunc <- 1 + Cluster + time + Cluster*time;
   cogfunc <- 1 + Cluster + time + Cluster*time;
   adl <- 1 + Cluster + time + Cluster*time;
   iadl <- 1 + Cluster + time + Cluster*time;
   gali <- 1 + Cluster + time + Cluster*time;
   morbidity <- 1 + Cluster + time + Cluster*time;
   depress <- 1 + Cluster + time + Cluster*time;
	 cogfunc <-> socialfunc;
   depress <-> cogfunc;	